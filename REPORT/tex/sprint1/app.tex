\section{RunOff Application}
For the first sprint it was decided the focus should be on creating a very basic application prototype which could showcase the envisioned \ac{GUI} functionality and be able to interface with the server. 

\subsection{User Interface}
At its core the application is intended to be quick and easy to use - the user should open the application, choose a running mode (against friends or against an unknown opponent), pick a route and be ready to go. For the first sprint a rough mock-up of the interface for the application was designed, outlined below. The focus was on keeping the navigation level as low as possible, i.e. having as much information on each screen as possible to avoid the user having to go through five screens to find the wanted functionality.
\vspace{10pt}

When the user opens the application the first screen should show four buttons, encompassing the basic functionality of the application, illustrated in \autoref{fig:mainMock}


\begin{figure}[ht]
\begin{center}
 \caption{Main User Interface Mock-up}
 \label{fig:mainMock}
 \includegraphics[scale=0.4]{img/mainMockV1.png}
\end{center}
\end{figure}

The first option is the most vital: start an exercise session. Because this is the main focus of the application this button is larger than the others and the text is written in all caps. The second button takes the user to the Scoreboard where they will be able to see how they compare on a global scale and against friends. This is set as the second option to emphasize the focus on competition to motivate the user to keep running and using the application. The third button shows the user their profile. Here they will be able to see and edit general information such as name, age etc. which will be visible to others, as well as seeing personal records and previously completed runs and their friend list. The last option takes the user to a list of their saved routes showing their distance, difficulty rating, personal best time on the route etc. The user will not be able to edit the routes on the application, for this they need to use the website.
\vspace{10pt}

Choosing to start an exercise session will take the user to an options menu shown in \autoref{fig:optionsMock}

\begin{figure}[ht]
\begin{center}
 \caption{Options Menu Mock-up}
 \label{fig:optionsMock}
 \includegraphics[scale=0.4]{img/optionsMock.png}
\end{center}
\end{figure}

The user can either choose to start a RunOff, i.e. a ranked game against an unknown opponent, or a Friendly Run against a person on the user's friend list. Choosing either of the two will take the user to very similar screens with the options to pick a route or start looking for a random opponent/choose a friend from the friend list to run against. These screens are illustrated in \autoref{fig:matchMock}

\begin{figure}[ht]
\begin{center}
 \caption{Matchmaking Screen Mock-up}
 \label{fig:matchMock}
 \includegraphics[scale=0.4]{img/matchMock.png}
\end{center}
\end{figure}

If the user wishes to pick a route, they will push the "Pick Route" button which will take them to a list of their saved routes, showing name, distance and difficulty, seen in \autoref{fig:pickRouteMock}

\begin{figure}[ht]
\begin{center}
 \caption{Pick Route Mock-up}
 \label{fig:pickRouteMock}
 \includegraphics[scale=0.4]{img/pickRouteMock.png}
\end{center}
\end{figure}

\subsection{Implementation}
For the first sprint it was decided that the functionality for the application prototype should be a basic interface and establishing a connection to the server to retrieve the routes created and saved online. The \ac{GUI} was implemented with an activity for each screen and a class to handle the \ac{HTTP} interactions. 

\subsubsection{Main Screen}
The main screen was implemented as a class extending the \texttt{ActionBarActivity}, with an accompanying \ac{XML} file specifying the layout of the activity. The layout for this activity is shown in \autoref{fig:mainV1} 

\begin{figure}[ht]
\begin{center}
 \caption{Main Activity Prototype}
 \label{fig:mainV1}
 \includegraphics[scale=0.4]{img/mainV1.png}
\end{center}
\end{figure}

There is currently no styling on the buttons, the background or the action bar because this was not part of the focus of this sprint. 
\vspace{10pt}

The \texttt{MainActivity} class is implemented with an \texttt{onCreate} function which runs the initial setup when the activity is first started such as setting the layout of the activity to the \ac{XML}-file producing the layout shown in \autoref{fig:mainV1} and contacting the server. It utilizes another class, \texttt{HttpHandler}, to establish a connection to the server, log the user in and get their saved routes. These calls are run on separate threads created for this because network calls are not allowed on the \ac{UI} thread. 
\vspace{10pt}

The \texttt{HttpHandler} class has 4 functions: 
\begin{itemize}
\item  \texttt{is\_reachable} which asserts if the server is reachable by using sockets and returns a boolean value signifying if it is or not. It instantiates a new socket and attempts to connect via it to the IP and port of the server for 10 seconds. If it connects, the boolean value is set to true, if not it is set to false. The socket is then closed and the value is returned.

\item \texttt{http\_request} is a generic \ac{HTTP} request function returning a custom \texttt{ResponseData} object consisting of a status code in integers and a response body, which is stored in a string. The implementation is shown in 

\begin{lstlisting}[label={lst:http-request},caption={The http-request function},language=java]    
public static ResponseData http_request(String url, HttpMethod method, List<NameValuePair> parameters)
{
    //prep request
    HttpRequestBase request = null;

    if(method == HttpMethod.GET)
    {
        request = new HttpGet(url);
        //TODO: URl encode parameters

    }
    else if(method == HttpMethod.POST)
    {
        HttpPost post = new HttpPost(url);
        try
        {
            post.setEntity(new UrlEncodedFormEntity(parameters));
        }
        catch (UnsupportedEncodingException e)
        {
            e.printStackTrace();
        }

        request = post;
    }
    try
    {
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();

        ResponseData data = new HttpHandler.ResponseData();
        data.body = EntityUtils.toString(entity, "UTF-8");
        data.status = response.getStatusLine().getStatusCode();

        return data;
    }
    catch (ClientProtocolException e)
    {
        // writing exception to log
        e.printStackTrace();
   }
   catch (IOException e)
   {
       // writing exception to log
       e.printStackTrace();
    }
    return null;
}
\end{lstlisting} 


\item \texttt{login\_request} which attempts to log the user in and
\item \texttt{route\_request}, which retrieves their saved routes.
\end{itemize}


\subsection{Testing}